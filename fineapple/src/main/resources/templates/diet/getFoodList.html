<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="index/toolbar :: head">
<meta charset="utf-8">
 

</head>
<body>


<div th:insert="index/toolbar :: toolbar">
	</div>

	
	
<script type="text/javascript">
function fncGetUserList(currentPage) {
	//document.getElementById("currentPage").value = currentPage;

   	//document.detailForm.submit();
	$("form").attr("method" , "POST").attr("action" , "/diet/getFood").submit();
}

$(function() {

	 
	 $(".foodName").on("click" , function() {
			self.location="/diet/getFood?foodCd="+$(this).attr("data-foodCd");		
});
});

$(function() {
	//==> DOM Object GET 3가지 방법 ==> 1. $(tagName) : 2.(#id) : 3.$(.className)
	//==> 1 과 3 방법 조합 : $("tagName.className:filter함수") 사용함.	
	 $( "button.btn.btn-success" ).on("click" , function() {
		//Debug..
		//alert(  $( "td.ct_btn01:contains('가입')" ).html() );
		
		
		var chek_arr = [];
		$("input[name=foodCheck]:checked").each(function(){
		var foodCd = $(this).val();
		chek_arr.push(foodCd);
})		
		if(chek_arr==0){
			alert('선택한 상품이 없습니다!')
			
		}
		if(chek_arr.length>9){
			alert('9개까지만 가능합니다!')
			
		}
		
		
		if(chek_arr.length<10 && chek_arr.length!=0){
		console.log(chek_arr);
		popWin = window.open("/diet/getAddDaily?chekarray="+chek_arr,"popWin","left=300, top=200, width=600, height=400, marginwidth=0, marginheight=0, scrollbars=no, scrolling=no, menubar=no, resizable=no");
		 }
	});
});	

function Chk() {

	var result = Array();

	var cnt = 0;

	var chkbox = $(".checkedfood");

	for(i=0;i<chkbox.length;i++) {

		if(chkbox[i].checked == true) {

			result[cnt] = chkbox[i].value;

			cnt++;

		}

	}

	$('#result').val(result);

}

function CheckAll() {

	var chkbox = $(".checkedfood");

	var chkall = document.getElementById('checkedAllFood');

	for(i=0;i<chkbox.length;i++) {

		chkbox[i].checked = chkall.checked;

	}

	Chk();

}












// $.ajax(
// 		{
// 			url : "/diet/getFoodList",
// 			type : 'get',
// 			data:JSON.stringify({"currentPage":page,"searchCondition":searchCondition,"searchKeyword":searchKeyword}),
// 			dataType : "JSON",
// 			contentType : "application/json; charset=utf-8",
				
// 			}
// 		});



</script>	
<!-- Button trigger modal -->


	<form>
			
<div class="container show-grid">
		<div class="row">
			<div class="col-md-2">
				<div data-obj-id="PTjxr" data-obj-type="element"
					data- text-editable="true" class="">
					<div data-text-content="true"
						style="border-radius: 30px; text-align: center; line-height: 20px; color: rgb(255, 255, 255); font-size: 14px; box-shadow: none; background-color: rgba(31, 108, 28, 0.67);"
						class="">오늘의 추천 음식?</div>
				</div>

				<a href="http://item.gmarket.co.kr/Item?goodscode=2042609688"><img src="../assets/img/salad3.jpg" style ="height: 500px; width: 200px;"/></a>
			</div>
			<div class="col-md-10">
			<br>
			<br>
			
			<div align="center" data-text-content="true" style="font-weight: bold; font-size: 33px;" class="" >식품 리스트</div>
			<br><br>
<!-- 			<img src="../assets/img/dodbogi2.png" style ="height: 60px; width: 20px;"/> -->

				<div align="right">
			    <form class="form-inline" name="detailForm">
					<select class="form-control" name="searchCondition" style="width: 100px;">
					<option value="0" th:selected= "${search.searchCondition}=='0'">식품명</option>
					<option value="1" th:selected= "${search.searchCondition}=='1'">제조사</option>
					</select>
				
									  
			<input type="text" data-min-width="60" data-min-height="30" name="searchKeyword" data-text-content="true" placeholder="내용을 입력해주세요" style="color: rgb(94, 94, 94);"		
			       th:value="${not #strings.isEmpty(search.searchKeyword) ? search.searchKeyword : '' }">
			
<!-- 			<button data-text-content="true" id="button" class="btn btn-sm btn-primary" >검색</button>
 -->			<button data-text-content="true" class="btn btn-primary">검색</button>
			<br>
			
	<div style="position:absoulte;top:100px;left:0px;">		    			
	<button type="button" class="btn btn-success">일일섭취식단에 추가</button>
			<button type="button" class="btn btn-warning">즐겨찾기에 추가</button>
					</div>
			</form>
			</div>
			
						
<ul class="nav">
 <li>
  <a data-toggle="modal" href="#loginModal">LOGIN</a>
  <div class="modal fade" id="loginModal" role="dialog">
   <div class="modal-dialog">
    <div class="modal-content">
     <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">×</button>
      <h1 class="modal-title" align="center">즐겨찾기리스트</h1>
     </div>
     <div class="modal-body">
      <th:block th:insert="diet/getFavMealList :: setLogin"></th:block>
     </div>
    </div>
   </div>
  </div>
 </li>
</ul>
			
			
			
 		<table class="table table-hover table-striped" >			
  		<thead>
          <tr>
            <th style="	background-color: rgba(51, 132, 86, 0.62);"  align="center"><input type="checkbox" id="checkedAllFood" name="foodAllCheck" onclick='CheckAll();'></th>         
            <th style="	background-color: rgba(51, 132, 86, 0.62);"  align="center">번호</th>         
            <th style="	background-color: rgba(51, 132, 86, 0.62);"  align="center">제조사</th>         
            <th style="	background-color: rgba(51, 132, 86, 0.62);" align="center">식품명</th>         
            <th style="	background-color: rgba(51, 132, 86, 0.62);" align="center">식품칼로리</th>           
            <th style="	background-color: rgba(51, 132, 86, 0.62);" align="center">식품탄수화물</th>                       
            <th style="	background-color: rgba(51, 132, 86, 0.62);" align="center">식품단백질</th>                       
            <th style="	background-color: rgba(51, 132, 86, 0.62);" align="center">식품지방</th>                       
          </tr>
        </thead>
        
	
       <tbody>
	<tr th:each="data, i : ${list}">
		<td><input type="checkbox" class="checkedfood" name="foodCheck" th:value="${data.foodCd}"  onclick='Chk();'></td>
		<td th:text="${i.count}"   style="cursor:pointer; text-align: left;"></td>
		<td th:text="${data.makerName}"   style="cursor:pointer; text-align: left;"></td>
		<td th:text="${data.foodName}" th:attr="data-foodCd=${data.foodCd}"  class="foodName" style="cursor:pointer; text-align: left;"></td>
		<td th:text="${data.foodKcal}" style="cursor:pointer; text-align: left;"></td>
		<td th:text="${data.foodCarb}" style="cursor:pointer; text-align: left;"></td>
		<td th:text="${data.foodProtein}" style="cursor:pointer; text-align: left;"></td>
		<td th:text="${data.foodFat}" style="cursor:pointer; text-align: left;"></td>
	</tr>
</tbody>
	<!-- 	<img th:src="${../assets/img/dodbogi.png}" style ="height: 60px; width: 20px;"/>			 -->

	</table>
	

			</div>
			</div>
			</div>		
			
			
			
			
</form>



 








</body>
</html>